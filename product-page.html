<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./assets/css/style.css">
    <link rel="stylesheet" href="./assets/css/product-page.css">
    <link rel="stylesheet" href="./assets/css/modal_register_style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <title>сюда нужно передать название продукта</title>
</head>
<style>
            .error {
      background-color: rgba(220, 53, 69, 0.1);
      color: red;
      display: block;
    }
        .message {
      margin-top: 15px;
      padding: 12px;
      border-radius: 8px;
      font-weight: 500;
      font-size: 0.9rem;
      display: none;
    }   
    </style>
<body>
    <header>
<nav class="navbar">
            <div class="logoDiv">
                <a href="./index.html">
                    <img class="logoHeaderSize" src="./assets/img/logo.png" alt="logo">
                </a>
            </div>
            <div class="othercontrols">
                <a href="./index.html">Ana səhifə</a>
                <a href="./shop.html">Mağaza</a>
                <a href="./aboutUs.html">Haqqımızda</a>
                <a href="./contact.html">Bizimlə əlaqə</a>
                <a href="./cart.html">
                    <img src="./assets/img/cart.png" alt="cart">
                </a>
                <a href="#">
                    <img src="./assets/img/language.png" alt="language">
                </a>
                        <div id="authControl">
            <button class="signIn" id="modalPage">Daxil ol</button>
            </div>
            </div>
    
            <div class="overlaytus" id="overlaytus" onclick="closeNav()"></div>
    
            <div id="mySidebar" class="sidebar">
                <a href="javascript:void(0)" class="closebtn_first" onclick="closeNav()">&times;</a>
            
                <div class="sidebar-links">
                    <a href="./index.html">Ana səhifə</a>
                    <a href="./shop.html">Mağaza</a>
                    <a href="./aboutUs.html">Haqqımızda</a>
                    <a href="./contact.html">Bizimlə əlaqə</a>
                    <a href="./cart.html">Səbət</a>
                    <br><br>
                
                    <div class="language-dropdown">
                        <button class="language-btn">
                          <img src="./assets/img/Earth - 3.svg" alt="language">
                          Azərbaycan
                          <img src="./assets/img/CaretDown.svg" alt="arrowdown" class="arrow-icon">
                        </button>
                        <div class="language-menu">
                          <a href="#">English</a>
                          <a href="#">Русский</a>
                          <a href="#">Türkçe</a>
                        </div>
                      </div>
                      
                </div>
                
            
                <div id="mobileAuthControl">
  <button class="sidebar-button" onclick="document.location='mobile_sing.html'">Qeydiyyatdan keç</button>
</div>
            </div>
            
    
            </div>
            <button class="openbtn" onclick="openNav()">☰</button>
    
        </nav>

    <div id="overlay"></div>

    <div id="popUP"  data-aos="zoom-in-up">
        <button class="close-btn" id="closeBtn">&times;</button>
        <img class="ModalLogo" src="./assets/img/logo.png" alt="logoModal">
        <h2>Freshboxa xoş gəlmisiniz!</h2>

        <p>Hesab yaradaraq, təkliflərimizdən yararlana bilərsiniz. Daxil olmaq üçün email ünvanınızı və şifrənizi seçin. Hesabınız varsa, daxil olun.</p>

        <div class="switchButtons">
            <button class="active" onclick="switchForm('login')">Daxil ol</button>
            <button onclick="switchForm('register')">Qeydiyyat</button>
        </div>
        
        <!-- Registration Form -->
        <div id="registerForm" class="formContainer" style="display:none;">
            <form id="registerFormAction">
                <label for="full_name">Ad və Soyad</label>
                <div><img src="./assets/img/User.png" alt="NameSurname"><input type="text" id="full_name" name="full_name" placeholder="Ad və Soyad" required></div>
                <label for="register_email">Mail adresiniz</label>
                <div><img src="./assets/img/Message.png" alt="mail"><input type="text" id="register_email" name="email" placeholder="E-mail" required></div>
                <label for="register_password">Parol daxil edin</label>
                <div><img src="./assets/img/Lock password.png" alt="password"><input type="password" id="register_password" name="password" placeholder="Parol" required></div>
                <span>Ən az 8 simvildan ibarət olmalıdır</span>
                <input style="cursor: pointer;" type="submit" value="Qeydiyyatdan keç">
            </form>
            <div id="registerMessage" class="message"></div>
        </div>
        
        <!-- Login Form -->
        <div id="loginForm" class="formContainer" style="display:block;">
            <form>
                <label>Mail adresiniz</label>
                <div><img src="./assets/img/Message.png" alt="mail"><input type="text" id="email" placeholder="E-mail" required></div>
                <label>Parol daxil edin</label>
                <div><img src="./assets/img/Lock password.png" alt="password"><input type="password" id="password" placeholder="Parol" required></div>
                <span>Ən az 8 simvildan ibarət olmalıdır</span>
                <input style="cursor: pointer;" type="submit" value="Daxil ol">
            </form>
        </div>

        <div class="linesOr"><div class="line"></div>or<div class="line"></div></div>
        <div class="googleButton"><button><img src="./assets/img/c8c3099ebf31fee900c92a985399f3f1.png" alt="google">Google</button></div>
    </div>
</header>
    <div class="size">
        <div class="page-part">
            <p><a href="./index.html">Ana səhifə</a> <span>/</span> </p>
            <p><a href="./shop.html">Mağaza</a> <span>/</span> </p>
            <p>Tərəvəz <span>/</span> <h5>Kök</h5></p>
        </div>

        
  <div class="product-image-info">
  <div class="product-image-box">
    <img src="./assets/img/4b0f78ae7944818833c90e57ab30b231.jpg" alt="product-image">
  </div>
  <div class="product-image-box-info">
    <div>
      <h1 id="put_name_here" data-product-id="123">Təzə Kök - 1 kiloqram</h1>
      <span class="put_price_here" id="put_price_here">2.90 AZN</span>
    </div>
    <div>
      <p class="put_description_here" id="put_description_here">Təzə, xırtıldayan və vitaminlərlə zəngin kök...</p>
    </div>
    <div class="mobile-bullets">
      <form id="add-to-cart-form">
        <div class="position-bullets-button">
          <button type="button" onclick="changeValue(this, -1)">-</button>
          <input type="text" id="numberInput" value="1" oninput="validateNumber(this)">
          <button type="button" onclick="changeValue(this, 1)">+</button>
        </div>
        <input id="add-to-card-script" type="submit" value="Səbətə əlavə et">
      </form>
    </div>
    <div class="star-text-orange">
      <img src="./assets/img/star-orange.svg" alt="star">
      <span id="add_to_favourite">Bəyənilərə əlavə et</span>
    </div>
    <div class="categories-paragf-add-here">
      <p>Kateqoriya : <span class="add_category_here" id="add_category_here">Tərəvəzlər, Kök</span></p>
    </div>
  </div>
</div>


        <div class="recommendation_box">
            <h2 style="text-align: center;">Tövsiyyə edilən məhsullar</h2>
            <div class="recommendation_box_cards">
                <div class="card_recommendation">
                    <div class="image-circle">
                        <div class="image_box"><img src="./assets/img/7683c493753f0d78fecbe07dc26b0e8b.png" alt="productImage"></div>
                        <button style="cursor: pointer;"><div class="wish_list_circle"><img src="./assets/img/orangeHerz.svg" alt="orangeHerz"></div></button>
                    </div>
                    <div class="name-weight">
                        <h3>Greyfruit</h3>
                        <span>1 kg</span>
                    </div>
                    <div class="price">
                        <span>2.90 man</span>
                    </div>
                    <div>
                        <button role="link" onclick="window.location.href='shop.html';">İndi sifariş et</button>
                    </div>
                </div>
                
                <div class="card_recommendation">
                    <div class="image-circle">
                        <div class="image_box"><img src="./assets/img/7683c493753f0d78fecbe07dc26b0e8b.png" alt="productImage"></div>
                        <button style="cursor: pointer;"><div class="wish_list_circle"><img src="./assets/img/orangeHerz.svg" alt="orangeHerz"></div></button>
                    </div>
                    <div class="name-weight">
                        <h3>Greyfruit</h3>
                        <span>1 kg</span>
                    </div>
                    <div class="price">
                        <span>2.90 man</span>
                    </div>
                    <div>
                        <button role="link" onclick="window.location.href='shop.html';">İndi sifariş et</button>
                    </div>
                </div>
                <div class="card_recommendation">
                    <div class="image-circle">
                        <div class="image_box"><img src="./assets/img/7683c493753f0d78fecbe07dc26b0e8b.png" alt="productImage"></div>
                        <button style="cursor: pointer;"><div class="wish_list_circle"><img src="./assets/img/orangeHerz.svg" alt="orangeHerz"></div></button>
                    </div>
                    <div class="name-weight">
                        <h3>Greyfruit</h3>
                        <span>1 kg</span>
                    </div>
                    <div class="price">
                        <span>2.90 man</span>
                    </div>
                    <div>
                        <button role="link" onclick="window.location.href='shop.html';">İndi sifariş et</button>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <footer>
        <div class="footerLogoText">
            <img class="footerLogoSize" src="./assets/img/logo.png" alt="footerLogo">
            <p>Gündəlik Ehtiyaclarınıza Cavab Verən Zəngin<br> Məhsul Seçimi</p>
        </div>
        <div class="infoFooter">
            <div class="socialIconsLinks">
                <span>Sosial media</span>
                <div class="oneLevelmgText"><a href="#"><img src="./assets/img/lin.png" alt="linkedin">Linkedln</a></div>
                <div class="oneLevelmgText"><a href="#"><img src="./assets/img/InstagramLogo.png" alt="instagram">Instagram</a></div>
                <div class="oneLevelmgText"><a href="#"><img src="./assets/img/FacebookLogo.png" alt="facebook">Facebook</a></div>
            </div>
            <div class="numberMail">
                <span>Əlaqə</span>
                <div><a href="tel:+994 55 555 55 55">+994 55 555 55 55</a></div>
                <div><a href="mailto:mobilingo@gmail.com">mobilingo@gmail.com</a></div>
            </div>
        </div>
    
      </footer>
        <div class="underFooter">
            <div class="line"></div>
            <span>Freshbox©agentliyi 2025dən bəri. Bütün hüquqlar qorunur.</span>
        </div>
<div id="toast" class="toast">Məhsul səbətə əlavə edildi!</div>

            <script src="./assets/scripts/index.js"></script>
            <script src="./assets/scripts/product-page.js"></script>
            <script src="./assets/scripts/pop_up_mobile_menu.js"></script>
    <script>
        // Инициализация AOS
             AOS.init();
  
     
     function changeValue(delta) {
    const input = document.getElementById("numberInput");
    let value = parseInt(input.value) || 0;
    value = Math.max(1, value + delta); // минимум 1
    input.value = value;
}

function validateNumber(input) {
    input.value = input.value.replace(/\D/g, ''); // убирает все нецифры
}


window.addEventListener("load", function () {
  const mobileAuthControl = document.getElementById('mobileAuthControl');
  const token = localStorage.getItem('token');
  const userId = localStorage.getItem('userId');

  if (window.innerWidth <= 768) {
    if (token && userId) {
      // show icon
if (mobileAuthControl) {
  mobileAuthControl.innerHTML = `
    <a href="./profile.html" style="
      padding: 10px 30px;
      display: flex;
      flex-direction: row;
      align-items: center;
      margin-top: 20px;
      text-decoration: none;
      font-size: 22px;
      color: white;
      transition: 0.3s;
    " onmouseover="this.style.backgroundColor='rgba(19, 125, 59, 0.95)'" 
       onmouseout="this.style.backgroundColor=''">
      <img src="./assets/img/iconizer-Profile.svg" alt="Profile" style="margin-right: 10px;">
      Profile
    </a>
  `;
  mobileAuthControl.style.display = 'flex';
}
    } else {
      // show register button
      if (mobileAuthControl) {
        mobileAuthControl.innerHTML = `
          <button class="sidebar-button" onclick="document.location='mobile_sing.html'">Qeydiyyatdan keç</button>
        `;
        mobileAuthControl.style.display = 'flex';
      }
    }
  }
});

    
function showToast(message) {
  const toast = document.getElementById("toast");
  toast.textContent = message;
  toast.classList.add("show");

  setTimeout(() => {
    toast.classList.remove("show");
  }, 2000); // скрыть через 2 секунды
}

function changeValue(btn, delta) {
  const input = document.getElementById("numberInput");
  let value = parseInt(input.value) || 1;
  value += delta;
  if (value < 1) value = 1;
  input.value = value;
}

function validateNumber(input) {
  if (parseInt(input.value) < 1 || isNaN(parseInt(input.value))) {
    input.value = 1;
  }
}

document.getElementById("add-to-card-script").addEventListener("click", function (e) {
  e.preventDefault();

  const token = localStorage.getItem("token");
  const userId = localStorage.getItem("userId");

  // Проверка авторизации
  if (!token || !userId) {
    showToast("Zəhmət olmasa əvvəlcə hesabınıza daxil olun.");
    return;
  }

  const quantity = parseInt(document.getElementById("numberInput").value);
  if (!quantity || quantity < 1) {
    showToast("Zəhmət olmasa düzgün say daxil edin.");
    return;
  }

  const product = JSON.parse(localStorage.getItem("selectedProduct"));
  if (!product) {
    showToast("Məhsul məlumatı tapılmadı.");
    return;
  }

  product.cartQuantity = quantity;

  let cart = JSON.parse(localStorage.getItem("cartProducts")) || [];

  const existingProductIndex = cart.findIndex(p => p.id === product.id);
  if (existingProductIndex !== -1) {
    cart[existingProductIndex].cartQuantity += quantity;
  } else {
    cart.push(product);
  }

  localStorage.setItem("cartProducts", JSON.stringify(cart));

  showToast("Məhsul səbətə əlavə edildi!");

  setTimeout(() => {
    window.location.href = "cart.html";
  }, 1000);
});


         </script>
</body>
</html>